(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[77],{1277:function(e,t,a){"use strict";a.r(t);var n=a(165),r=a(113),c=a.n(r),s=a(651),i=a(166),o=a(167),u=a(169),l=a(168),d=a(2),h=a(713),p=a.n(h),g=(a(1220),a(659),a(690)),m=a(691),j=a(664),x=a(666),f=a(1305),b=a(1240),O=a(1241),y=a(1242),v=a(648),k=a(742),_=a(649),w=a(657),S=a.n(w),C=a(17),N=new Headers,A=localStorage.getItem("auth");N.append("Authorization","Bearer "+A),N.append("Content-Type","application/json");var P=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getCompanyName=function(){var e=Object(s.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()({baseURL:_.a.BASE_URL,url:_.a.PLUGIN_DATA_COMPANY,method:"POST",data:{company_id:t}});case 2:return a=e.sent,n.setState({company_name:a.data.data.Name,currentSlug:a.data.data.Slug,confirmSlug:a.data.data.Slug}),e.abrupt("return",a.data.data.Name);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getPackageName=function(){var e=Object(s.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()({baseURL:_.a.BASE_URL,url:_.a.PLUGIN_DATA_PACKAGE,method:"POST",data:{package_id:t}});case 2:return a=e.sent,n.setState({package_name:a.data.data.Name,package_time:a.data.data.Value+" "+n.convertUnitToDate(a.data.data.Unit),package_key:a.data.data.Value,package_unit:a.data.data.Unit}),e.abrupt("return",a.data.data.Name);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getFeatureChoose=function(){var e=Object(s.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()({baseURL:_.a.BASE_URL,url:_.a.DATA_CHOOSE_FEATURE,method:"POST",data:{feature:0==t.length?JSON.parse(localStorage.getItem("arrFeature")):t}});case 2:return a=e.sent,n.setState({arrFeature:a.data.data}),e.abrupt("return",a.data.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleChange=function(){var e=Object(s.a)(c.a.mark((function e(t,a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({objectValueCompany:t,Company_Id:t.value,disableNext:!1}),e.next=3,n.getCompanyName(t.value);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={data:[],Company_Id:"",Package_Id:"",Feature_Id:"",arrayFeature:[],arrayChooseFeature:[],modalCom:!1,updated:"",dataApi:[],action:"new",modalDelete:!1,delete:null,arrPagination:[],token:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},company_id:localStorage.getItem("user"),dataPackage:[],dataFeature:[],company_name:"",package_name:"",package_time:"",package_key:"",package_unit:"",arrFeature:[],disableNext:!1,time_expried:"",time_create:"",currentSlug:"",confirmSlug:"",isLoading:!1,arrOptionCompany:[],objectValueCompany:{}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.getCompanyData(),this.getPackageData(),this.getFeatureData(),t=JSON.parse(localStorage.getItem("url")),a=0;a<t.length;a++)t[a].url==window.location.hash&&1==t[a].isHidden&&(window.location.href="#/");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCompanyData",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t,a,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()({baseURL:_.a.BASE_URL,url:_.a.PLUGIN_LIST_COMPANY,method:"POST"});case 2:for(t=e.sent,a=t.data.data,n=[],r=0;r<a.length;r++)n.push({value:a[r]._id,label:a[r].Name});this.setState({arrOptionCompany:n,objectValueCompany:n.length>0?n[0]:{value:"",label:""}});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPackageData",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()({baseURL:_.a.BASE_URL,url:_.a.LIST_PACKAGE,method:"POST"});case 2:t=e.sent,this.setState({dataPackage:t.data.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPackage_forFeature",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()({baseURL:_.a.BASE_URL,url:_.a.LIST_PACKAGE,method:"POST"});case 2:return t=e.sent,e.abrupt("return",t.data.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getFeatureData",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()({baseURL:_.a.BASE_URL,url:_.a.LIST_FEATURE,method:"POST"});case 2:t=e.sent,this.setState({dataFeature:t.data.data});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleModal",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBadge",value:function(e){switch(e){case"INSTOCK":return"success";case"AVAILABLE":return"secondary";case"Locked":return"warning";case"Deactived":return"danger";default:return"primary"}}},{key:"convertUnitToDate",value:function(e){switch(e){case"0":return"Ng\xe0y";case"1":return"Th\xe1ng";case"2":return"N\u0103m"}}},{key:"renderSelect",value:function(){for(var e=this,t=this.state,a=t.dataFeature,n=t.dataPackage,r=t.Package_Id,i=new Array,o=[],u=[],l=[],d=0;d<n.length;d++)if(n[d]._id==r&&"1"==n[d].Status)for(var h=0;h<n[d].Array_Feature.length;h++)u.push({name:n[d].Array_Feature[h].Key,id:n[d].Array_Feature[h]._id}),l.push(n[d].Array_Feature[h]._id);localStorage.setItem("arrFeature",JSON.stringify(l));for(var g=0;g<a.length;g++)o.push({name:a[g].Key,id:a[g]._id});return Object(C.jsx)(p.a,{options:o,selectedValues:u,onSelect:function(){var t=Object(s.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=new Array,n=0;n<a.length;n++)i.push(a[n].id);e.setState({arrayChooseFeature:i});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onRemove:function(){var t=Object(s.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=new Array,n=0;n<a.length;n++)i.push(a[n].id);e.setState({arrayChooseFeature:i});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),displayValue:"name"})}},{key:"addOrderPlugin",value:function(){var e=Object(s.a)(c.a.mark((function e(){var t,a,n,r,s,i,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.Company_Id,n=t.Package_Id,r=t.arrFeature,s=t.time_create,i=t.time_expried,o={Company_Id:a,Package_Id:n,Array_Feature:r,Active_Date:s,End_Date:i},e.next=4,S()({baseURL:_.a.BASE_URL,url:_.a.ADD_PLUGIN_ORDER,method:"PUT",data:o,headers:this.state.token});case 4:1==(u=e.sent).data.is_success?(alert(u.data.message),window.location.reload()):alert(u.data.message);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderTable",value:function(e,t,a,n){var r=this.state.currentSlug;return Object(C.jsxs)("table",{ble:!0,className:"table table-hover table-outline mb-0 d-none d-sm-table",children:[Object(C.jsx)("thead",{className:"thead-light",children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{className:"text-center",children:"No."}),Object(C.jsx)("th",{className:"text-center",children:"Th\u1eddi h\u1ea1n"}),Object(C.jsx)("th",{className:"text-center",children:"T\xean t\xednh n\u0103ng"}),Object(C.jsx)("th",{className:"text-center",children:"\u0110\u01b0\u1eddng d\u1eabn"})]})}),Object(C.jsxs)("tbody",{children:[Object(C.jsx)("td",{colSpan:"10",hidden:!0,className:"text-center",children:"Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u"}),void 0!=e||0!=e.length||null!=e?e.map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{className:"text-center",children:t+1}),Object(C.jsx)("td",{className:"text-center",children:n}),Object(C.jsx)("td",{className:"text-center",children:e.Key}),Object(C.jsx)("td",{className:"text-center",children:e.Value+r})]},t)})):""]})]})}},{key:"getCurrentMonth",value:function(e,t){var a=new Date;switch(e){case"0":return a.setDate(a.getDate()+t);case"1":return a.setMonth(a.getMonth()+t);case"2":return a.setFullYear(a.getFullYear()+t)}}},{key:"getCurrentDate",value:function(){}},{key:"onNext",value:function(){var e=Object(s.a)(c.a.mark((function e(t,a,n){var r,s,i,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.state,s=r.package_key,i=r.package_unit,o=r.currentSlug,u=r.confirmSlug,""==t||""==a){e.next=15;break}return e.next=4,this.getCompanyName(t);case 4:return e.next=6,this.getPackageName(a);case 6:return e.next=8,this.getFeatureChoose(n);case 8:if(o==u){e.next=13;break}return e.next=11,S()({baseURL:_.a.BASE_URL,url:_.a.UPDATE_SLUG,method:"POST",data:{id:t,Slug:o}});case 11:1==e.sent.is_success&&this.setState({currentSlug:o});case 13:e.next=16;break;case 15:""==t?alert("Ch\u01b0a ch\u1ecdn c\xf4ng ty !!!"):""!=a&&alert("Ch\u01b0a ch\u1ecdn g\xf3i !!!");case 16:this.getCurrentDate(),this.getCurrentMonth(),this.setState({disableNext:!0,time_create:Date.now(),time_expried:this.getCurrentMonth(i,Number(s))});case 19:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.dataPackage,n=t.Company_Id,r=t.Package_Id,i=t.arrayChooseFeature,o=t.company_name,u=t.package_name,l=t.package_time,d=t.arrFeature,h=t.package_key,p=t.package_unit,_=t.currentSlug,w=t.objectValueCompany,S=t.arrOptionCompany;return Object(C.jsxs)("div",{className:"animated fadeIn",children:[Object(C.jsxs)(g.a,{children:[Object(C.jsx)(m.a,{children:Object(C.jsx)("i",{className:"fa fa-align-justify",children:" Qu\u1ea3n l\xfd \u0111\u01a1n h\xe0ng"})}),Object(C.jsx)(j.a,{children:Object(C.jsx)("div",{style:T.tags,children:Object(C.jsxs)(v.W,{children:[Object(C.jsx)(v.o,{sm:"12",lg:"12",children:Object(C.jsxs)(v.W,{children:[Object(C.jsx)(v.o,{md:"2",lg:"2",sm:"12",xm:"12",lx:"2",children:Object(C.jsx)(v.M,{children:"Ch\u1ecdn c\xf4ng ty:"})}),Object(C.jsx)(v.o,{md:"10",lg:"10",sm:"12",xm:"12",lx:"10",children:Object(C.jsx)(k.a,{isClearable:!0,onChange:this.handleChange,value:w,options:S})})]})}),Object(C.jsxs)(v.o,{sm:"12",lg:"12",children:[Object(C.jsx)(v.M,{children:"\u0110\u1ecbnh danh"}),Object(C.jsx)(x.a,{onChange:function(t){e.setState({currentSlug:t.target.value})},value:_})]}),Object(C.jsx)(v.o,{sm:"12",lg:"12",children:Object(C.jsxs)("div",{children:[Object(C.jsx)("label",{style:T.flexLabel,htmlFor:"tag",children:"Ch\u1ecdn g\xf3i s\u1ea3n ph\u1ea9m:    "}),Object(C.jsxs)(v.X,{style:T.flexOption,onChange:function(){var t=Object(s.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({Package_Id:a.target.value,disableNext:!1}),t.next=3,e.getPackageName(a.target.value);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(C.jsx)("option",{value:this.state.Package_Id,children:"-----"}),a.map((function(t,a){return Object(C.jsx)("option",{value:t._id,children:"".concat(t.Name," (").concat(t.Value," ").concat(e.convertUnitToDate(t.Unit),")")})}))]})]})}),Object(C.jsxs)(v.o,{sm:"12",lg:"12",children:[Object(C.jsx)("label",{style:T.flexLabel,htmlFor:"tag",children:"Ch\u1ecdn c\xe1c t\xednh n\u0103ng cho g\xf3i:    "}),this.renderSelect()]}),Object(C.jsx)(v.o,{sm:"12",lg:"12",children:Object(C.jsxs)("label",{style:{marginTop:10},htmlFor:"tag",children:["S\u1ed1 l\u01b0\u1ee3ng t\xednh n\u0103ng: ",0==this.state.arrayChooseFeature.length?JSON.parse(localStorage.getItem("arrFeature")).length:this.state.arrayChooseFeature.length,"    "]})}),Object(C.jsx)(v.o,{sm:"12",lg:"12",children:Object(C.jsxs)(v.W,{children:[Object(C.jsx)(v.o,{sm:"12",lg:"6"}),Object(C.jsx)(v.o,{sm:"12",lg:"6",children:Object(C.jsx)(v.d,{disabled:this.state.disableNext,outline:!0,color:"primary",style:T.floatRight,size:"sm",onClick:function(){var t=Object(s.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onNext(n,r,i);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"Ti\u1ebfp t\u1ee5c"})})]})}),0!=d.length?Object(C.jsx)(v.o,{sm:"12",lg:"12",children:Object(C.jsxs)(v.W,{children:[Object(C.jsx)(v.o,{sm:"12",lg:"12",children:"KI\u1ec2M TRA L\u1ea0I \u0110\u01a0N H\xc0NG TR\u01af\u1edaC KHI X\xc1C NH\u1eacN"}),Object(C.jsx)(v.o,{sm:"12",lg:"12",children:Object(C.jsxs)("strong",{children:["T\xean C\xf4ng Ty: ",o]})}),Object(C.jsx)(v.o,{sm:"12",lg:"12",children:Object(C.jsxs)("strong",{children:["T\xean G\xf3i: ",u]})}),Object(C.jsx)(v.o,{sm:"12",lg:"12",children:Object(C.jsxs)("strong",{children:["Th\u1eddi gian k\xedch ho\u1ea1t d\u1ef1 ki\u1ebfn: ",new Date(Date.now()).toLocaleDateString()]})}),Object(C.jsx)(v.o,{sm:"12",lg:"12",children:Object(C.jsxs)("strong",{children:["Th\u1eddi gian h\u1ebft h\u1ea1n d\u1ef1 ki\u1ebfn: ",new Date(this.getCurrentMonth(p,Number(h))).toLocaleDateString()]})}),Object(C.jsx)(v.o,{sm:"12",lg:"12",children:this.renderTable(d,o,u,l)}),Object(C.jsx)(v.o,{sm:"12",lg:"12",children:Object(C.jsx)(v.d,{outline:!0,color:"primary",style:T.floatRight,size:"sm",onClick:function(){var t=Object(s.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addOrderPlugin();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:"T\u1ea1o \u0111\u01a1n h\xe0ng"})})]})}):""]})})})]}),Object(C.jsxs)(f.a,{isOpen:this.state.modalCom,children:[Object(C.jsx)(b.a,{children:"Danh s\xe1ch ph\u1ea7n c\u1ee9ng"}),Object(C.jsx)(O.a,{}),Object(C.jsxs)(y.a,{children:[Object(C.jsx)(v.d,{color:"primary",onClick:function(t){e.setState({arrHardWard:e.state.arrChooseHard})},children:"L\u01b0u"})," ",Object(C.jsx)(v.d,{color:"secondary",onClick:function(t){return e.toggleModal("new")},children:"Close"})]})]})]})}}]),a}(d.Component),T=Object(n.a)({pagination:{marginRight:"5px"},flexLabel:{width:"100%",marginTop:6},flexOption:{width:"100%",margin:"1px"},a:{textDecoration:"none"},floatRight:{float:"right",margin:"5px"},spinner:{width:"30px"},center:{textAlign:"center"},tbody:{height:"380px",overflowY:"auto"},wh12:{width:"8%",float:"left",height:"80px"},wh15:{width:"15%",float:"left",height:"80px"},w5:{width:"12%",float:"left",height:"80px"},wa10:{width:"5%",float:"left",height:"80px"},row:{float:"left",width:"100%"},success:{color:"green"},danger:{color:"red"},mgl5:{marginLeft:"5px"},tags:{padding:10},searchInput:{width:"160px",display:"inline-block",margin:"1px"},userActive:{color:"green"},userPending:{color:"red"},nagemonNameCol:{width:"328px"},image:{width:"100px",height:"100px",borderRadius:"99999px"}},"mgl5",{marginBottom:"5px"});t.default=P}}]);
//# sourceMappingURL=77.e125d183.chunk.js.map