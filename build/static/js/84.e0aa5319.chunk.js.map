{"version":3,"sources":["views/base/tables/Banner/Banner.js","views/Common/TextFieldGroup.js"],"names":["headers","Headers","auth","localStorage","getItem","append","Banner","props","getData","a","company_id","state","setState","isLoading","API_CONNECT","Constants","GET_BANNER","res","data","banner","sub_banner","JSON","parse","image_banner","image_sub_banner","link_banner","link_sub_banner","this","arr","i","length","to","window","location","hash","hidden","href","e","files","target","reader","FileReader","readAsDataURL","onload","result","BASE_URL","name","form","FormData","UPLOAD_BANNER","ADD_BANNER","className","css","override","size","color","loading","speedMultiplier","sm","lg","field","type","onChange","onChangeImageBanner","width","height","src","style","marginBottom","paddingLeft","paddingRight","onError","onerror","onChangeImageSubBanner","Component","TextFieldGroup","value","label","error","checkUserExists","readOnly","placeholder","onClick","classnames","onBlur","defaultProps"],"mappings":"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","file":"static/js/84.e0aa5319.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport {\r\n  Card,\r\n  CardBody,\r\n  CardHeader,\r\n  Col,\r\n  Row,\r\n} from 'reactstrap';\r\n\r\nimport {\r\n  CLabel,\r\n  CRow,\r\n  CCol,\r\n} from '@coreui/react'\r\nimport 'moment-timezone';\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport API_CONNECT from \"../../../../functions/callAPI\";\r\nimport Constants from \"./../../../../contants/contants\";\r\nimport TextFieldGroup from \"../../../Common/TextFieldGroup\";\r\nimport { css } from \"@emotion/react\";\r\nimport DotLoader from \"react-spinners/DotLoader\";\r\nlet headers = new Headers();\r\nconst auth = localStorage.getItem('auth');\r\nheaders.append('Authorization', 'Bearer ' + auth);\r\nheaders.append('Content-Type', 'application/json');\r\nclass Banner extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      company_id: JSON.parse(localStorage.getItem('user')).company_id,\r\n      isLoading: false,\r\n      banner: \"\",\r\n      sub_banner: \"\",\r\n      image_banner: \"\",\r\n      image_sub_banner: \"\",\r\n      link_banner: \"\",\r\n      link_sub_banner: \"\"\r\n    };\r\n  }\r\n  async componentDidMount() {\r\n    this.getData();\r\n\r\n    let arr = JSON.parse(localStorage.getItem('url'));\r\n    for (let i = 0; i < arr.length; i++) {\r\n      if (\"#\" + arr[i].to == window.location.hash) {\r\n        if (arr[i].hidden == true) {\r\n          window.location.href = '#/'\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getData = async () => {\r\n    const { company_id } = this.state;\r\n    this.setState({ isLoading: true });\r\n    const res = await API_CONNECT(Constants.GET_BANNER, { company_id: company_id }, \"\", \"POST\")\r\n\r\n    let data = res.data;\r\n\r\n    this.setState({ isLoading: false, banner: data.banner, sub_banner: data.sub_banner });\r\n  }\r\n\r\n  onChangeImageBanner(e) {\r\n    const { company_id, link_sub_banner, sub_banner } = this.state;\r\n\r\n    let files = e.target.files;\r\n    let reader = new FileReader();\r\n    reader.readAsDataURL(files[0])\r\n    reader.onload = (e) => {\r\n      this.setState({ banner: \"\", image_banner: e.target.result, link_banner: `${Constants.BASE_URL}/public/image_banner/${files[0].name}`}, async () => {\r\n        const form = new FormData();\r\n        form.append(\"image\", files[0]);\r\n\r\n        await API_CONNECT(Constants.UPLOAD_BANNER, form, \"\", \"POST\")\r\n        await API_CONNECT(Constants.ADD_BANNER, {\r\n          company_id: company_id,\r\n          banner: `${Constants.BASE_URL}/public/image_banner/${files[0].name}`,\r\n          sub_banner: link_sub_banner != \"\" ? link_sub_banner : sub_banner\r\n        }, \"\", \"POST\")\r\n      })\r\n    }\r\n  }\r\n\r\n  onChangeImageSubBanner(e) {\r\n    const { company_id, link_banner, banner } = this.state;\r\n\r\n    let files = e.target.files;\r\n    let reader = new FileReader();\r\n    this.setState({ sub_banner: \"\" })\r\n    reader.readAsDataURL(files[0])\r\n    reader.onload = (e) => {\r\n      this.setState({ sub_banner: \"\", image_sub_banner: e.target.result, link_sub_banner: `${Constants.BASE_URL}/public/image_banner/${files[0].name}` }, async () => {\r\n        const form = new FormData();\r\n        form.append(\"image\", files[0]);\r\n\r\n        await API_CONNECT(Constants.UPLOAD_BANNER, form, \"\", \"POST\")\r\n        await API_CONNECT(Constants.ADD_BANNER, {\r\n          company_id: company_id,\r\n          banner: link_banner != \"\" ? link_banner : banner,\r\n          sub_banner: `${Constants.BASE_URL}/public/image_banner/${files[0].name}`\r\n        }, \"\", \"POST\")\r\n      })\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { banner, sub_banner, image_banner, image_sub_banner } = this.state;\r\n\r\n    if (!this.state.isLoading) {\r\n      return (\r\n        <div className=\"animated fadeIn\">\r\n          <Row>\r\n            <Col>\r\n              <Card>\r\n                <CardHeader>\r\n                  THÔNG TIN BANNER\r\n                </CardHeader>\r\n                <CardBody>\r\n                  <CRow>\r\n                    <CCol sm=\"12\" lg=\"12\">\r\n                      <CRow>\r\n                        <CCol sm=\"12\" lg=\"12\">\r\n                          <CLabel><strong>Banner chính: <a href={`${banner}`}>{`${banner}`}</a></strong></CLabel>\r\n                          <TextFieldGroup\r\n                            field=\"image\"\r\n                            type={\"file\"}\r\n                            onChange={e => { this.onChangeImageBanner(e) }}\r\n                          />\r\n                          {\r\n                            banner != \"\" ?\r\n                              <img width=\"100%\" height=\"400\" src={`${banner}`} style={{ marginBottom: 20, paddingLeft: 150, paddingRight: 150 }} /> :\r\n                              <img width=\"100%\" height=\"400\" src={`${image_banner}`} style={{ marginBottom: 20, paddingLeft: 150, paddingRight: 150 }} onError={(e)=>{e.target.onerror = null; e.target.src=\"https://aina.vn/wp-content/uploads/2021/08/default-image-620x600-1.jpg\"}}/>\r\n                          }\r\n                        </CCol>\r\n                        <CCol sm=\"12\" lg=\"12\">\r\n                          <CLabel><strong>Banner phụ: <a href={`${sub_banner}`}>{`${sub_banner}`}</a></strong></CLabel>\r\n                          <TextFieldGroup\r\n                            field=\"image\"\r\n                            type={\"file\"}\r\n                            onChange={e => { this.onChangeImageSubBanner(e) }}\r\n                          />\r\n                          {\r\n                            sub_banner != \"\" ?\r\n                              <img width=\"100%\" height=\"400\" src={`${sub_banner}`} style={{ marginBottom: 20, paddingLeft: 150, paddingRight: 150 }} /> :\r\n                              <img width=\"100%\" height=\"400\" src={`${image_sub_banner}`} style={{ marginBottom: 20, paddingLeft: 150, paddingRight: 150 }} onError={(e)=>{e.target.onerror = null; e.target.src=\"https://aina.vn/wp-content/uploads/2021/08/default-image-620x600-1.jpg\"}}/>\r\n                          }\r\n\r\n                        </CCol>\r\n                      </CRow>\r\n                    </CCol>\r\n                  </CRow>\r\n                </CardBody>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"sweet-loading\">\r\n        <DotLoader css={override} size={50} color={\"#123abc\"} loading={this.state.isLoading} speedMultiplier={1.5} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst override = css`\r\n  display: block;\r\n  margin: 0 auto;\r\n  border-color: red;\r\n`;\r\n\r\nconst styles = {\r\n  datePicker: {\r\n    marginBottom: 20\r\n  },\r\n  wa10: {\r\n    width: \"5%\",\r\n    float: \"left\",\r\n    height: \"80px\"\r\n  },\r\n  pagination: {\r\n    marginRight: '5px'\r\n  },\r\n  flexLabel: {\r\n    width: 100\r\n  },\r\n  flexOption: {\r\n    width: 200,\r\n    margin: '1px'\r\n  },\r\n  a: {\r\n    textDecoration: 'none'\r\n  },\r\n  floatRight: {\r\n    float: \"right\",\r\n    marginTop: '3px'\r\n  },\r\n  spinner: {\r\n    width: \"30px\"\r\n  },\r\n  center: {\r\n    textAlign: \"center\"\r\n  },\r\n  tbody: {\r\n    height: \"380px\",\r\n    overflowY: \"auto\"\r\n  },\r\n  wh12: {\r\n    width: \"10%\",\r\n    float: \"left\",\r\n    height: \"80px\"\r\n  },\r\n  wh15: {\r\n    width: \"15%\",\r\n    float: \"left\",\r\n    height: \"80px\"\r\n  },\r\n  w5: {\r\n    width: \"12%\",\r\n    float: \"left\",\r\n    height: \"80px\"\r\n  },\r\n  row: {\r\n    float: \"left\",\r\n    width: \"100%\"\r\n  },\r\n  success: {\r\n    color: 'green'\r\n  },\r\n  danger: {\r\n    color: 'red'\r\n  },\r\n  mgl5: {\r\n    marginLeft: '5px'\r\n  },\r\n  tags: {\r\n    float: \"right\",\r\n    marginRight: \"5px\"\r\n  },\r\n  searchInput: {\r\n    width: '100%',\r\n    display: 'inline-block',\r\n    margin: '1px'\r\n  },\r\n  userActive: {\r\n    color: 'green'\r\n  },\r\n  userPending: {\r\n    color: 'red'\r\n  },\r\n  nagemonNameCol: {\r\n    width: '328px'\r\n  },\r\n  image: {\r\n    width: '100px',\r\n    height: '100px',\r\n    borderRadius: '99999px'\r\n  },\r\n}\r\n\r\nexport default Banner;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classnames from 'classnames';\r\n\r\nconst TextFieldGroup = ({ field, value, label, error, type, onChange, checkUserExists, readOnly, placeholder, onClick }) => {\r\n  return (\r\n    <div className={classnames('form-group', { 'has-error': error })}>\r\n      <label className=\"control-label\">{label}</label>\r\n      <input\r\n        onChange={onChange}\r\n        onClick={onClick}\r\n        onBlur={checkUserExists}\r\n        value={value}\r\n        type={type}\r\n        name={field}\r\n        placeholder={placeholder}\r\n        readOnly={readOnly}\r\n        className=\"form-control\"\r\n      />\r\n    {error && <span className=\"help-block\">{error}</span>}\r\n    </div>  );\r\n}\r\n\r\nTextFieldGroup.propTypes = {\r\n  field: PropTypes.string.isRequired,\r\n  value: PropTypes.string.isRequired,\r\n  label: PropTypes.string.isRequired,\r\n  error: PropTypes.string,\r\n  type: PropTypes.string.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n  checkUserExists: PropTypes.func\r\n}\r\n\r\nTextFieldGroup.defaultProps = {\r\n  type: 'text'\r\n}\r\n\r\nexport default TextFieldGroup;\r\n"],"sourceRoot":""}